---
title: カメラとセンサーの追加
---

# カメラとセンサーの追加

## 学習目標

このチュートリアルを修了すると、以下の内容を習得できます：

- ステージへのカメラの追加方法
- Camera Inspector を使ったカメラ出力の確認方法
- ロボットのジオメトリへのカメラの取り付け方法
- デュアルビューポートでのカメラ映像の表示方法

## はじめに

### 前提条件

- [チュートリアル 3: 基本ロボットのアーティキュレーション](03_articulate_robot.md) を完了していること

!!! tip "チェックポイントアセットからの開始"
    前回のチュートリアルを完了していない場合は、画面右下の **Content** タブから **Samples > Rigging > MockRobot** フォルダ内の `mock_robot_rigged` アセットをロードすることで、このチュートリアルから開始できます。ロード時は **File（参照ではなくファイルとして）** で開いてください。

### 所要時間

約 10〜15 分

### 概要

このチュートリアルでは、Isaac Sim でカメラセンサーを作成し、ロボットに取り付ける方法を学びます。ここで紹介するカメラの取り付け手順は、他のセンサー（LiDAR など）を取り付ける場合にも応用できます。

## カメラの追加

### カメラの作成

1. メニューバーの **Create > Camera** を選択してカメラを作成します。
2. ステージツリーに **Camera** が追加され、ビューポートにはカメラの視野（Field of View）を示すワイヤーフレームが表示されます。
3. ワイヤーフレームが見やすいように、追加した**Camera**の**Property**タブから**Translate** を'(0, 0, 2.0)'に変更しておきます。

![カメラの作成](images/13_create_camera.png)

!!! note "カメラアイコンの表示"
    デフォルトではカメラアイコンは非表示です。表示するには、ビューポート上部の ![Eye icon](https://docs.isaacsim.omniverse.nvidia.com/5.1.0/_images/isim_4.5_base_ref_gui_eyecon.png) をクリックし、**Show By Type > Cameras** を選択してください。

!!! tip "現在のビューからカメラを作成"
    ビューポートのカメラを好きな位置・角度に合わせた状態で、ビューポート左上の **Camera** ボタンのドロップダウンから **Camera > Create from View** を選択すると、現在のビューの視点からカメラを作成できます。手動でトランスフォームを設定するよりも直感的にカメラを配置できます。<br>
    ![現在のビューからカメラを作成](images/14_create_from_view.png)

### カメラのプロパティ

**Camera**を選択すると、**Property** タブで以下のプロパティを確認・編集できます：

| プロパティ | 説明 |
|---|---|
| **Focal Length** | 焦点距離（mm）。値が大きいほど望遠、小さいほど広角になります |
| **Focus Distance** | フォーカス距離。オートフォーカスが無効の場合に使用されます |
| **fStop** | 絞り値。被写界深度に影響します |
| **Clipping Range** | 描画する距離の範囲（Near / Far）。範囲外のオブジェクトは描画されません |

## カメラ出力の確認

**Camera Inspector** 拡張機能を使って、カメラの映像出力をリアルタイムで確認できます。

1. メニューバーの **Tools > Sensors > Camera Inspector** を選択します。
2. Camera Inspector ウィンドウが開きます。
3. ウィンドウ上部のドロップダウンから確認したいカメラ（**Camera**）を選択します。
4. **Camera State**でカメラの位置姿勢が正しいか確認できます。
5. **CREATE VIEWPORT**ボタンをクリックすることで新しいビューポートウインドウが生成され、カメラからの出力を確認できます。

    ![Camera Inspector](images/15_camera_inspector.webp)

## ロボットへのカメラの取り付け

### カメラのリネーム

1. ステージツリーの **Camera** を右クリックして **Rename** を選び、**car_camera** にリネームします。

### デュアルビューポートの設定

ロボットの外観とカメラ映像を同時に確認するために、2つ目のビューポートを開きます。

1. メニューバーの **Window > Viewports > Viewport 2** を選択します。
2. 2つ目のビューポートが画面に追加されます。
3. 追加されたビューポート（Viewport 2）の左上にある **Camera** ボタンをクリックし、ドロップダウンから **car_camera** を選択します。
4. Viewport 2 に car_camera の視点からの映像が表示されます。

![デュアルビューポートの設定](images/16_add_viewport.png)

### カメラの親子関係の設定

カメラをロボットのボディに取り付けて、ロボットの動きに追従させます。

1. ステージツリーで **car_camera** を、ロボットの **body** Xform の中にドラッグ＆ドロップします。
2. car_camera が body の子要素になり、ロボットの動きに連動するようになります。

### カメラのトランスフォーム調整

カメラがロボットの前方を向くように、位置と向きを調整します。

1. ステージツリーで **car_camera** を選択します。
2. **Property** タブの **Transform** で以下の値を設定します：
    - **Translate**: **(-6, 0, 2.2)**
    - **Orient**: **(0, -80, -90)**
    - **Scale**: **(1, 1, 1)**
3. 2つのビューポートで、カメラの位置と向きが正しいことを確認します。

![カメラのトランスフォーム調整](images/17_adjust_camera_transform.png)

!!! warning "ビューポート操作によるカメラプロパティの変更に注意"
    car_camera のビューを表示しているビューポートでマウス操作（パン、回転など）を行うと、カメラのトランスフォームが直接変更されてしまいます。カメラ映像の確認中は、Viewport 2 でのマウス操作に注意してください。

### シミュレーションでの確認

1. **Play** ボタンを押してシミュレーションを開始します。
2. Viewport 1（メインビューポート）ではロボットの外観を、Viewport 2 では car_camera の映像をリアルタイムで確認できます。
3. 前回のチュートリアルで設定した Velocity Controller を使ってロボットを動かし、カメラ映像がロボットの動きに追従することを確認します。

![シミュレーションでの確認](images/18_simulate_robot_camera.webp)

!!! tip "ベストプラクティス"
    カメラを直接移動するのではなく、ロボットのボディの子要素として正しいオフセットで配置することで、意図しない位置変更を防ぎ、シミュレーション中も安定したカメラ映像を得ることができます。

## まとめ

このチュートリアルでは以下のトピックを扱いました：

1. **カメラ**のステージへの追加と基本プロパティの確認
2. **Camera Inspector** を使ったカメラ出力のリアルタイム確認
3. **デュアルビューポート**の設定によるマルチアングル表示
4. ロボットのボディへの**カメラの取り付け**（親子関係の設定）
5. **トランスフォームの調整**によるカメラ位置・向きの設定

## 次のステップ

次のチュートリアル「[モバイルロボットのリギング](05_rig_mobile_robot.md)」に進み、実際のロボットアセットをアーティキュレーション付きのモバイルロボットに仕上げる方法を学びましょう。
